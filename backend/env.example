###############################################################################
# MediOS / AI Scribe Environment Configuration
# Copy this file to `.env` in the backend directory and set the secrets.
###############################################################################

# Optional: HuggingFace token (only needed for authenticated downloads).
HF_TOKEN=

# Required: Google Generative AI key for Gemini note generation.
GEMINI_API_KEY=

# Whisper model size (tiny, base, small, medium, large, large-v1).
MODEL_SIZE=base

# Directories for uploads and cached models.
DATA_PATH=./uploads
WHISPER_CACHE_DIR=./models

# Gemini configuration (override if needed).
# Note: gemini-1.5-pro and gemini-1.5-flash were deprecated in September 2025
# Use newer models like gemini-2.0-flash-exp or gemini-1.5-pro-latest
GEMINI_MODEL=gemini-2.0-flash-exp
GEMINI_TEMPERATURE=0.2
GEMINI_MAX_TOKENS=1000

# Summarizer configuration
SUMMARIZER_ENABLED=true
# Path to MEDS parquet shards (glob). Update to match your dataset location.
SUMMARIZER_DATA_GLOB=./medi-os/data/meds_omop_ehrshot/meds_omop_ehrshot/data/*.parquet
# Path to the codes parquet lookup file.
SUMMARIZER_CODES_PATH=./medi-os/data/meds_omop_ehrshot/meds_omop_ehrshot/metadata/codes.parquet
SUMMARIZER_MAX_CACHE_ENTRIES=32
SUMMARIZER_STOP_GAP_DAYS=90
SUMMARIZER_SLOW_THRESHOLD=5.0
SUMMARIZER_TEMPERATURE=0.2
SUMMARIZER_MAX_TOKENS=3000
SUMMARIZER_USE_FAKE_LLM=false
SUMMARIZER_CACHE_TTL_MINUTES=360

# Database configuration (PostgreSQL recommended for production)
DATABASE_URL=postgresql+psycopg2://postgres:postgres@localhost:5432/medios
DATABASE_POOL_SIZE=5
DATABASE_MAX_OVERFLOW=10
DATABASE_POOL_RECYCLE=1800
DATABASE_ECHO=false

# JWT secrets (generate long random strings for production)
JWT_ACCESS_SECRET=change-me-access
JWT_REFRESH_SECRET=change-me-refresh
JWT_ALGORITHM=HS256
JWT_ACCESS_EXPIRES_MIN=15
JWT_REFRESH_EXPIRES_MIN=43200

# General app configuration
APP_ENV=development
APP_DEBUG=false

# Storage configuration
STORAGE_BACKEND=local  # or gcs
STORAGE_LOCAL_PATH=./storage
STORAGE_GCS_BUCKET=
STORAGE_GCS_CREDENTIALS=
STORAGE_SIGNED_URL_EXPIRY=3600

# Rate limiting & feature flags
RATE_LIMIT_ENABLED=false
RATE_LIMIT_DEFAULT_PER_MINUTE=120
RATE_LIMIT_BURST_MULTIPLIER=3.0
FEATURE_FLAGS=  # Example: {"beta_dashboard": true, "new_notes": false}

# Triage model configuration
TRIAGE_MODEL_DIR=medi-os/services/manage-agent/models
TRIAGE_METADATA_FILE=xgboost_lightgbm_metadata.pkl
TRIAGE_BASELINE_METADATA_FILE=baseline_metadata.pkl
TRIAGE_STACKING_MODEL=final_stacking_ensemble.pkl
TRIAGE_XGB_MODEL=final_xgboost_full_features.pkl
TRIAGE_LGBM_MODEL=final_lightgbm_full_features.pkl

